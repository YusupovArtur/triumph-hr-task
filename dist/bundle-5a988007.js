(()=>{"use strict";const t={viewBox:{width:90,height:90},polygonSidesRange:[4,8],fill:"#A00",stroke:"#000",strokeWidth:2,strokeWidthActive:4,paddingShare:.08,padding:0};t.padding=Math.max(t.viewBox.width,t.viewBox.height)*t.paddingShare;const e="#1e2938",s=(t.viewBox.width,t.viewBox.height,.3),o=50,n="#ccc",i=JSON.stringify({bufferZonePolygons:[],workZonePolygons:[],polygonsCoords:{}}),r="data",a=document.createElement("template");a.innerHTML=`\n  <style>\n    :host {\n      display: inline-block;\n      user-select: none;\n      margin: 0;\n      padding: 0;\n      border: 0;\n    }\n    *, *::before, *::after {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n      border: 0;\n      font: inherit;\n      vertical-align: baseline;\n    }\n    svg {\n      display: block;\n      width: ${t.viewBox.width}px;\n      height: ${t.viewBox.height}px;\n    }\n    .wrap {\n      display: block;\n      width: fit-content;\n      height: fit-content;\n      cursor: grab;\n    }\n  </style>\n  <div class="wrap" draggable="true"></div>\n`;class d extends HTMLElement{constructor(){super(),this._data=null,this.dataSource=null,this.dragstartCallback=void 0,this.onDragStart=t=>{var e;if(this.dragstartCallback&&this.dragstartCallback(),!this._data)return;const s=this._wrap.getBoundingClientRect(),o={data:this._data,dataSource:this.dataSource,dropId:null,dragstartOffset:{x:t.clientX-s.left,y:t.clientY-s.top}};null===(e=t.dataTransfer)||void 0===e||e.setData("text/plain",JSON.stringify(o)),t.dataTransfer.effectAllowed="move"},this.onDrop=t=>{var e;if(t.preventDefault(),!this._data)return;const s=null===(e=t.dataTransfer)||void 0===e?void 0:e.getData("text/plain");if(s)try{const t=Object.assign(Object.assign({},JSON.parse(s)),{dropId:this._data.id});this.dispatchEvent(new CustomEvent("on-polygon-drop",{detail:t,bubbles:!0,composed:!0}))}catch(t){console.error("Drop event error",t)}},this.onMouseMoveAndDown=t=>{t.stopPropagation()},this.onMouseEnter=()=>{this._data&&this._data.strokeWidth!==t.strokeWidthActive&&(this._data.strokeWidth=t.strokeWidthActive,this.render())},this.onMouseLeave=()=>{this._data&&this._data.strokeWidth!==t.strokeWidth&&(this._data.strokeWidth=t.strokeWidth,this.render())};const e=this.attachShadow({mode:"open"});e.appendChild(a.content.cloneNode(!0)),this._wrap=e.querySelector(".wrap")}connectedCallback(){this.addEventListener("dragstart",this.onDragStart),this.addEventListener("drop",this.onDrop),this.addEventListener("mousemove",this.onMouseMoveAndDown),this.addEventListener("mousedown",this.onMouseMoveAndDown),this.addEventListener("mouseenter",this.onMouseEnter),this.addEventListener("mouseleave",this.onMouseLeave)}disconnectedCallback(){this.removeEventListener("dragstart",this.onDragStart),this.removeEventListener("drop",this.onDrop),this.removeEventListener("mousemove",this.onMouseMoveAndDown),this.removeEventListener("mousedown",this.onMouseMoveAndDown),this.removeEventListener("mouseenter",this.onMouseEnter),this.removeEventListener("mouseleave",this.onMouseLeave)}set data(t){this._data=t,this.dataset.serialized=JSON.stringify(t),this.render()}get data(){return this._data}render(){this._wrap.innerHTML="",this._data&&Array.isArray(this._data.points)&&this._wrap.appendChild((e=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=t.padding;return s.setAttribute("viewBox",`${e.sizes.minX-o/2} ${e.sizes.minY-o/2} ${e.sizes.width+o} ${e.sizes.height+o}`),s.appendChild((t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","polygon"),s=t.points.map(t=>`${t.x},${t.y}`).join(" ");return e.setAttribute("points",s),e.setAttribute("fill",t.fill),e.setAttribute("stroke",t.stroke),e.setAttribute("stroke-width",t.strokeWidth.toString()),e})(e)),s.style.width=`${e.sizes.width+o}px`,s.style.height=`${e.sizes.height+o}px`,s})(this._data))}}customElements.define("polygon-item",d);class h extends HTMLElement{constructor(){super(...arguments),this._data=[],this.dataSource=null}setDragAndDropHandler(){this.addEventListener("dragover",t=>{t.preventDefault()}),this.addEventListener("drop",e=>{var s;e.preventDefault();const o=null===(s=e.dataTransfer)||void 0===s?void 0:s.getData("text/plain");if(o)try{const e=JSON.parse(o);e.dataSource!==this.dataSource&&(this.dispatchEvent(new CustomEvent("polygon-moved",{detail:e,bubbles:!0,composed:!0})),-1===this._data.findIndex(t=>t.id===e.data.id)&&this._data.push(Object.assign(Object.assign({},e.data),{strokeWidth:t.strokeWidth})),this._data.forEach(e=>{e.strokeWidth=t.strokeWidth}),setTimeout(()=>{this.render()}))}catch(t){console.error("Drop event error",t)}})}dispatchData(t){switch(t.type){case"add":this._data.push(t.payload),this.render();break;case"remove":this._data=this._data.filter(e=>e.id!==t.payload.id),this.render()}}get data(){return this._data}set data(t){this._data=t,this.render()}render(){}}function l(t,e,s){return Math.min(Math.max(t,e),s)}const c=document.createElement("template");c.innerHTML=`\n  <style>\n    *, *::before, *::after {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";\n    }\n    :host {\n      display: block;\n      max-width: 50rem;\n      width: 100%;\n      height: 25dvh;\n      overflow: auto;\n      border-radius: 1rem;\n      background-color: ${e};\n      margin-bottom: 0.5rem;\n    }\n    .container {\n      display: flex;\n      flex-direction: row;\n      flex-wrap: wrap;\n      padding: 0.5rem;\n      align-items: center;\n      align-content: flex-start;\n      height: 100%;\n    }\n  </style>\n  <div class="container"></div>\n`,customElements.define("buffer-zone",class extends h{constructor(){super(),this.onPolygonDrop=e=>{e.preventDefault(),e.stopPropagation(),e.detail.dataSource!==this.dataSource&&(this._data.push(e.detail.data),this.dispatchEvent(new CustomEvent("polygon-moved",{detail:e.detail,bubbles:!0,composed:!0})));const s=e.detail.data.id,o=e.detail.dropId,n=this._data.findIndex(t=>t.id===s),i=this._data.findIndex(t=>t.id===o);-1!==n&&-1!==i&&(this._data=((t,e,s)=>{if((e=l(e,0,t.length-1))===(s=l(s,0,t.length)))return t;const o=[...t],[n]=o.splice(e,1);return o.splice(s,0,n),o})(this.data,n,i),this._data.forEach(e=>{e.strokeWidth=t.strokeWidth}),this.render())},this.dataSource="buffer-zone";const e=this.attachShadow({mode:"open"});e.appendChild(c.content.cloneNode(!0)),this._container=e.querySelector(".container")}connectedCallback(){this.setDragAndDropHandler(),this.addEventListener("on-polygon-drop",this.onPolygonDrop)}render(){this._container.innerHTML="",this._data.forEach(t=>{const e=document.createElement("polygon-item");e.data=t,e.dataSource=this.dataSource,this._container.appendChild(e)})}});const u=(t,e,s,o,n,i)=>{const r=-n*o,a=-i*o,d=t.width*(1-o)/2,h=t.height*(1-o)/2;return{x:l(e+r,-d,d),y:l(s+a,-h,h)}},g=t=>({x:t.clientX,y:t.clientY}),p=(t,e)=>({x:e.x-t.x,y:e.y-t.y}),v=(t,e)=>t.x*e.x+t.y*e.y,m=(t,e)=>({x:t*e.x,y:t*e.y}),f=()=>{const t=navigator.userAgent.toLowerCase();return/mobile|iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(t)?"mobile":"desktop"},y=document.createElement("template");y.innerHTML=`\n  <style>\n    :host {\n      display: block;\n      max-width: 50rem;\n      width: 100%;\n      height: fit-content;\n    }\n    svg {\n      display: block;\n      background-color: ${e};\n      cursor: move;\n      max-width: 50rem;\n      width: 100%;\n      height: 50dvh;\n    }\n  </style>\n  <div>\n    <svg></svg>\n  </div>\n`,customElements.define("work-zone",class extends h{constructor(){super(),this._polygonsCoords={},this.scale=1,this.offset={x:0,y:0},this.isDragging=!1,this.lastMouseCoords=null,this.lastTouchCoords=null,this.lastTouchCoords1=null,this.lastTouchCoords2=null,this.handleWheel=t=>{t.preventDefault();const e=.075*-this.scale*Math.sign(t.deltaY);this.scale=l(this.scale-e,s,1),this.offset=u(this._svg.getBoundingClientRect(),this.offset.x,this.offset.y,this.scale,0,0),this.updateViewBox()},this.handleMouseMove=t=>{if(!this.isDragging)return;if(null===this.lastMouseCoords)return;const e=t.clientX-this.lastMouseCoords.x,s=t.clientY-this.lastMouseCoords.y;this.offset=u(this._svg.getBoundingClientRect(),this.offset.x,this.offset.y,this.scale,e,s),this.updateViewBox(),this.lastMouseCoords={x:t.clientX,y:t.clientY}},this.handleMouseDown=t=>{this.isDragging=!0,this.lastMouseCoords={x:t.clientX,y:t.clientY},this._svg.style.cursor="grabbing"},this.handleMouseUp=()=>{this.isDragging=!1,this._svg.style.cursor="move"},this.dataSource="work-zone";const t=this.attachShadow({mode:"open"});t.appendChild(y.content.cloneNode(!0)),this._svg=t.querySelector("svg");const e=this._svg.getBoundingClientRect();this._svg.setAttribute("viewBox",`0 0 ${e.width} ${e.height}`),this._svg.addEventListener("wheel",this.handleWheel),this._svg.addEventListener("mousedown",this.handleMouseDown),this._svg.addEventListener("mousemove",this.handleMouseMove),this._svg.addEventListener("mouseup",this.handleMouseUp),this._svg.addEventListener("mouseleave",this.handleMouseUp),this._axesGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this._axesGroup.setAttribute("id","axes"),this._svg.appendChild(this._axesGroup),this.updateViewBox()}connectedCallback(){this.setDragAndDropHandler(),this.addEventListener("drop",e=>{var s;e.preventDefault();const o=null===(s=e.dataTransfer)||void 0===s?void 0:s.getData("text/plain");if(o)try{const s=JSON.parse(o),n=this._svg.getBoundingClientRect();let i=e.clientX-n.left,r=e.clientY-n.top;const a=((t,e,s)=>{const o=s.getBoundingClientRect(),n=s.viewBox.baseVal,i=n.x,r=n.y;return{x:i+t*(n.width/o.width),y:r+e*(n.height/o.height)}})(i,r,this._svg),d="desktop"===f()?s.dragstartOffset.x*this.scale-(s.data.sizes.width+t.padding)/2:0,h="desktop"===f()?s.dragstartOffset.y*this.scale-(s.data.sizes.height+t.padding)/2:0;a.x-=(s.data.sizes.width+t.padding)/2+d,a.y-=(s.data.sizes.height+t.padding)/2+h,i=l(a.x,0,n.width-(s.data.sizes.width+t.padding)),r=l(a.y,0,n.height-(s.data.sizes.height+t.padding)),this._polygonsCoords[s.data.id]={x:i,y:r},s.dataSource===this.dataSource&&(this._data.sort((t,e)=>t.id===s.data.id?1:e.id===s.data.id?-1:0),this._data.forEach(e=>{e.strokeWidth=t.strokeWidth}),this.render(),this.dispatchEvent(new CustomEvent("polygon-moved-inner")))}catch(t){console.error("Drop event error",t)}}),window.addEventListener("resize",()=>{this.updateViewBox.call(this),this.render.call(this)}),this._svg.addEventListener("touchmove",this.handleTouchMove.bind(this),{passive:!1}),this._svg.addEventListener("touchend",this.handleTouchEnd.bind(this),{passive:!1})}get polygonsCoords(){return this._polygonsCoords}set polygonsCoords(t){this._polygonsCoords=t,this.render()}render(){for(;this._svg.firstChild;)this._svg.removeChild(this._svg.firstChild);this._svg.appendChild(this._axesGroup);const e=this._svg.getBoundingClientRect();this._data.forEach(s=>{var o;const n=null!==(o=this._polygonsCoords[s.id])&&void 0!==o?o:{x:0,y:0},i=l(n.x,0,e.width-(s.sizes.width+t.padding)),r=l(n.y,0,e.height-(s.sizes.height+t.padding)),a=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");a.setAttribute("x",String(i)),a.setAttribute("y",String(r)),a.setAttribute("width",String(s.sizes.width+t.padding)),a.setAttribute("height",String(s.sizes.height+t.padding));const d=document.createElement("polygon-item");d.data=s,d.dragstartCallback=this.handleMouseUp,d.dataSource=this.dataSource,a.appendChild(d),this._svg.appendChild(a)})}updateViewBox(){const t=this._svg.getBoundingClientRect(),e=t.width/2*(1-this.scale)+this.offset.x,s=t.height/2*(1-this.scale)+this.offset.y;this._svg.setAttribute("viewBox",`${e} ${s} ${t.width*this.scale} ${t.height*this.scale}`),function(t,e,s){for(;e.firstChild;)e.removeChild(e.firstChild);const i=t.viewBox.baseVal,r=t.getBoundingClientRect(),a=i.x,d=i.y,h=a+i.width,l=d+i.height,c=document.createElementNS("http://www.w3.org/2000/svg","line");c.setAttribute("x1",a.toString()),c.setAttribute("y1",l.toString()),c.setAttribute("x2",h.toString()),c.setAttribute("y2",l.toString()),c.setAttribute("stroke",n),c.setAttribute("stroke-width",(4*s).toString());const u=document.createElementNS("http://www.w3.org/2000/svg","line");u.setAttribute("x1",a.toString()),u.setAttribute("y1",d.toString()),u.setAttribute("x2",a.toString()),u.setAttribute("y2",l.toString()),u.setAttribute("stroke",n),u.setAttribute("stroke-width",(4*s).toString());for(let t=Math.ceil(a/o)*o;t<=h;t+=o){const o=document.createElementNS("http://www.w3.org/2000/svg","line");o.setAttribute("x1",t.toString()),o.setAttribute("y1",l.toString()),o.setAttribute("x2",t.toString()),o.setAttribute("y2",(l-12*s).toString()),o.setAttribute("stroke",n),o.setAttribute("stroke-width",(2*s).toString());const i=document.createElementNS("http://www.w3.org/2000/svg","line");i.setAttribute("x1",t.toString()),i.setAttribute("y1",l.toString()),i.setAttribute("x2",t.toString()),i.setAttribute("y2",d.toString()),i.setAttribute("stroke",n),i.setAttribute("stroke-width",(.1*s).toString());const r=document.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("x",t?t.toString():(a+14*s).toString()),r.setAttribute("y",(l-14*s).toString()),r.setAttribute("font-size",(10*s).toString()),r.setAttribute("fill",n),r.setAttribute("style","user-select: none;"),r.textContent=t.toString(),e.appendChild(i),e.appendChild(o),e.appendChild(r)}const g=r.height-d,p=r.height-l;for(let t=Math.ceil(p/o)*o;t<=g;t+=o){const o=r.height-t,i=document.createElementNS("http://www.w3.org/2000/svg","line");i.setAttribute("x1",a.toString()),i.setAttribute("y1",o.toString()),i.setAttribute("x2",(a+12*s).toString()),i.setAttribute("y2",o.toString()),i.setAttribute("stroke",n),i.setAttribute("stroke-width",(2*s).toString());const d=document.createElementNS("http://www.w3.org/2000/svg","line");d.setAttribute("x1",a.toString()),d.setAttribute("y1",o.toString()),d.setAttribute("x2",h.toString()),d.setAttribute("y2",o.toString()),d.setAttribute("stroke",n),d.setAttribute("stroke-width",(.1*s).toString());const c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttribute("x",(a+14*s).toString()),c.setAttribute("y",t?o.toString():(l-14*s).toString()),c.setAttribute("font-size",(10*s).toString()),c.setAttribute("fill",n),c.setAttribute("style","user-select: none;"),c.textContent=t.toString(),e.appendChild(d),e.appendChild(i),e.appendChild(c)}e.appendChild(c),e.appendChild(u)}(this._svg,this._axesGroup,this.scale)}handleTouchMove(t){t.preventDefault(),t.stopPropagation();const e=((t,e,o,n,i,r,a)=>{if(e.preventDefault(),e.stopPropagation(),1===e.touches.length&&null!==i&&e.touches[0]){const s=p(i,g(e.touches[0]));return{offset:u(t,o.x,o.y,n,s.x,s.y),scale:n}}if(2===e.touches.length&&null!==r&&null!==a&&e.touches[0]&&e.touches[1]){const i=p(r,g(e.touches[0])),h=p(a,g(e.touches[1])),c=(d=p(g(e.touches[0]),g(e.touches[1])),Math.sqrt(Math.pow(d.x,2)+Math.pow(d.y,2))),f=p(g(e.touches[0]),g(e.touches[1])),y=p(g(e.touches[1]),g(e.touches[0])),w=v(i,f)/c,b=v(h,y)/c,x=m(w/c,i),S=m(b/c,h),C={x:(i.x-x.x)/2+(h.x-S.x)/2,y:(i.y-x.y)/2+(h.y-S.y)/2},A=l(n/((c-w-b)/c),s,1);return{offset:u(t,o.x,o.y,n,C.x,C.y),scale:A}}var d;return null})(this._svg.getBoundingClientRect(),t,this.offset,this.scale,this.lastTouchCoords,this.lastTouchCoords1,this.lastTouchCoords2);e&&(this.scale=e.scale,this.offset=e.offset,this.updateViewBox()),1===t.touches.length&&t.touches[0]?this.lastTouchCoords=g(t.touches[0]):2===t.touches.length&&t.touches[0]&&t.touches[1]&&(this.lastTouchCoords1=g(t.touches[0]),this.lastTouchCoords2=g(t.touches[1]))}handleTouchEnd(){this.lastTouchCoords=null,this.lastTouchCoords1=null,this.lastTouchCoords2=null}});class w extends HTMLElement{connectedCallback(){this.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" width="1.2rem" height="1.2rem" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">\n        <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9"/>\n        <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5 5 0 0 0 8 3M3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9z"/>\n      </svg>\n    '}}customElements.define("icon-arrow-repeat",w);class b extends HTMLElement{connectedCallback(){this.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" width="1.2rem" height="1.2rem" fill="currentColor" class="bi bi-folder" viewBox="0 0 16 16">\n        <path d="M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139q.323-.119.684-.12h5.396z"/>\n      </svg>\n    '}}customElements.define("icon-save",b);class x extends HTMLElement{connectedCallback(){this.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" width="1.2rem" height="1.2rem" fill="currentColor" class="bi bi-folder-x" viewBox="0 0 16 16">\n        <path d="M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181L15.546 8H14.54l.265-2.91A1 1 0 0 0 13.81 4H2.19a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91H9v1H2.826a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31zm6.339-1.577A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139q.323-.119.684-.12h5.396z"/>\n        <path d="M11.854 10.146a.5.5 0 0 0-.707.708L12.293 12l-1.146 1.146a.5.5 0 0 0 .707.708L13 12.707l1.146 1.147a.5.5 0 0 0 .708-.708L13.707 12l1.147-1.146a.5.5 0 0 0-.707-.708L13 11.293z"/>\n      </svg>\n    '}}function S(t,e){return Math.floor(Math.random()*(e-t+1))+t}function C(t,e){return Math.random()*(e-t)+t}function A(e=t.viewBox,s=t.polygonSidesRange,o=t.fill,n=t.stroke){const i=S(s[0],s[1]),r=Math.min(e.width,e.height)/2,a=[];for(let t=0;t<i;t++){const s=2*Math.PI*t/i+C(-Math.PI/i,Math.PI/i),o=C(r/3,r),n=Math.sin(s)*o+e.width/2,d=Math.cos(s)*o+e.height/2;a.push({x:Math.round(n),y:Math.round(d)})}const d=Math.min(...a.map(t=>t.x)),h=Math.max(...a.map(t=>t.x)),l=Math.min(...a.map(t=>t.y)),c=Math.max(...a.map(t=>t.y));return{id:S(1e5,1e6),points:a,fill:o,stroke:n,strokeWidth:t.strokeWidth,sizes:{minX:d,minY:l,width:h-d,height:c-l}}}function E(){const t=[];for(let e=0;e<S(5,20);e++)t.push(A());return t}function k(t){const e=JSON.stringify(t);return localStorage.setItem(r,e),t}function M(t){return"object"==typeof t&&null!==t&&"number"==typeof t.x&&"number"==typeof t.y}function _(t){if("object"!=typeof t||null===t)return!1;if("number"!=typeof t.id||!Array.isArray(t.points)||"string"!=typeof t.fill||"string"!=typeof t.stroke||"number"!=typeof t.strokeWidth||"object"!=typeof t.sizes||null===t.sizes)return!1;if(!t.points.every(M))return!1;const e=t.sizes;return"number"==typeof e.minX&&"number"==typeof e.minY&&"number"==typeof e.width&&"number"==typeof e.height}function L(t){if("object"!=typeof t||null===t)return!1;if(!Array.isArray(t.bufferZonePolygons)||!Array.isArray(t.workZonePolygons)||"object"!=typeof t.polygonsCoords||null===t.polygonsCoords)return!1;if(!t.bufferZonePolygons.every(_)||!t.workZonePolygons.every(_))return!1;for(const e in t.polygonsCoords)if(isNaN(Number(e))||!M(t.polygonsCoords[e]))return!1;return!0}customElements.define("icon-clear",x);const D={bufferZonePolygons:E(),workZonePolygons:[],polygonsCoords:{}};let z=!1;const B=document.querySelector("buffer-zone"),T=document.querySelector("work-zone"),N=document.getElementById("create-btn"),H=document.getElementById("save-btn"),P=document.getElementById("clear-btn");T.addEventListener("polygon-moved",t=>{B.dispatchData({type:"remove",payload:t.detail.data}),z=!0,$()}),T.addEventListener("polygon-moved-inner",()=>{z=!0,$()}),B.addEventListener("polygon-moved",t=>{T.dispatchData({type:"remove",payload:t.detail.data}),z=!0,$()});const W=()=>{B.data=E(),T.data=[],T.polygonsCoords={},z=!0,$()},I=()=>{Z=k({bufferZonePolygons:B.data,workZonePolygons:T.data,polygonsCoords:T.polygonsCoords}),z=!1,alert("Данные сохранены в Local Storage"),$()},O=()=>{B.data=[],T.data=[],T.polygonsCoords={},(Z.bufferZonePolygons.length>0||Z.workZonePolygons.length>0)&&(Z=k({bufferZonePolygons:[],workZonePolygons:[],polygonsCoords:{}}),alert("Данные удалены из Local Storage")),z=!0,$()},$=()=>{var t;const e=L(JSON.parse(null!==(t=localStorage.getItem(r))&&void 0!==t?t:i)),s=!(B.data.length>0||T.data.length>0);P&&(P.disabled=!e||s),H&&(H.disabled=!z)};window.addEventListener("DOMContentLoaded",()=>{N&&N.addEventListener("click",W),H&&H.addEventListener("click",I),P&&P.addEventListener("click",O),$()});let Z=function(){var t;const e=JSON.parse(null!==(t=localStorage.getItem(r))&&void 0!==t?t:i);return L(e)?e:(localStorage.removeItem(r),D)}();B.data=Z.bufferZonePolygons,T.data=Z.workZonePolygons,T.polygonsCoords=Z.polygonsCoords})();